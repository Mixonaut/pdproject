# Smart Home Sensor Simulator

A Python utility for generating realistic sensor data for the Smart Home Control System.

## Overview

This tool simulates various sensors and devices in a smart home environment by creating realistic data patterns and feeding them into your MySQL database. It's designed to work alongside the Smart Home Control System to provide test data for the admin dashboard and other system components.

## Features

- **Device Status Simulation**: Realistically toggles devices between on/off states
- **Energy Usage Generation**: Creates energy consumption patterns based on device type and time of day
- **Historical Data**: Can backfill the database with days worth of historical data
- **Live Simulation**: Runs in real-time to simulate ongoing device activity
- **Configurable Simulation Speed**: Adjust how fast the simulation runs

## Requirements

- Python 3.6+
- MySQL database (from Smart Home Control System)
- `mysql-connector-python` package

## Installation

1. Place the script in your Smart Home project folder:

```bash
# Download the script
curl -o sensor_simulator.py https://path/to/your/script/sensor_simulator.py

# Make it executable (on Unix-based systems)
chmod +x sensor_simulator.py
```

2. Install the required Python package:

```bash
pip install mysql-connector-python
```

## Configuration

The script uses the following database configuration by default:

```python
DB_CONFIG = {
    "host": "132.145.18.222",
    "user": "nm2064",
    "password": "wnd2VKSANY7",
    "database": "nm2064"
}
```

To use a different database configuration, edit these values in the script.

## Usage

### Generate Historical Data

To generate 7 days of historical data:

```bash
python sensor_simulator.py --historical 7
```

### Run Live Simulation

To simulate sensor activity for 60 minutes, updating every 30 seconds:

```bash
python sensor_simulator.py --duration 60 --interval 30
```

### Combined Mode

Generate historical data and then continue with live simulation:

```bash
python sensor_simulator.py --historical 3 --duration 30 --interval 15
```

### Accelerated Simulation

Run the simulation faster (10x speed) for quick data generation:

```bash
python sensor_simulator.py --duration 20 --interval 10 --speed 10
```

## Command Line Arguments

| Argument | Description | Default |
|----------|-------------|---------|
| `--historical` | Generate historical data for the specified number of days | 0 |
| `--duration` | Duration to run the live simulation in minutes | 60 |
| `--interval` | Interval between simulation updates in seconds | 60 |
| `--speed` | Simulation speed multiplier (higher = faster) | 1.0 |

## Data Generation Details

### Rooms and Devices

If no rooms or devices exist in the database, the simulator will create:
- 5 test rooms with different configurations
- Multiple devices per room (lights, thermostats, blinds, etc.)

### Energy Usage Patterns

The simulator creates realistic energy usage patterns that vary by:
- **Device type**: Different devices consume different amounts of energy
- **Time of day**: Usage peaks in mornings and evenings
- **Random variation**: Natural fluctuations for realistic data

### Device Status Changes

Devices change status (on/off) based on probabilities that reflect real-world usage:
- Lights change more frequently than thermostats
- Status changes follow realistic patterns

## Troubleshooting

### "Import mysql.connector could not be resolved"

This is an IDE warning and doesn't affect the script's functionality. Solutions:

1. Restart your IDE after installing the package
2. Select the correct Python interpreter in your IDE settings
3. Install the package in your active Python environment:
   ```bash
   pip install mysql-connector-python
   ```

### Database Connection Issues

If you encounter database connection errors:

1. Verify the database is running
2. Check that the connection parameters are correct
3. Ensure your network can reach the database server

## Integration with Smart Home Dashboard

After running the simulator:

1. Start your Node.js server for the Smart Home project
2. Open the admin dashboard in your browser
3. The data generated by the simulator should now appear in charts and device status displays

## Example Output

When running successfully, you'll see output like:

```
üè† Smart Home Sensor Simulator
------------------------------
‚úÖ Successfully connected to database
üìã Found 5 existing rooms
üìã Found 6 existing devices for room 101
üìã Found 5 existing devices for room 102
...
üè† Initialized simulator with 5 rooms and 28 devices
üîÑ Starting simulation loop (interval: 60s, duration: 60m)
‚ö° Recorded 0.0329 kWh for Ceiling Light
‚ö° Recorded 0.0436 kWh for Bedside Lamp
...
üìä Iteration 1/60: Created 12 energy records
üí§ Sleeping for 59.82s (adjusted for simulation speed)
...
```

## Contributing

Feel free to modify this script to suit your specific testing needs. Some ideas:
- Add more device types
- Implement anomaly generation for testing alerts
- Create seasonal patterns in energy usage
